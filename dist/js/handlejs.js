define(["jquery","MSG"],function(){var e=function(){this.$userName=$("#userName"),this.$Tel=$("input[type='tel']"),this.$Email=$("input[type='email']"),this.$validateCode=$("#validateCode"),this.$codeimg=$("#codeimg"),this.$Password=$("input[type='password']"),this.$SubmitBtn=$("#submit"),userNamTrue=!1,UserTrue=!1,TelTrue=!1,EmailTrue=!1,PwdTrue=!1,this.init()};e.prototype={init:function(){this.listen()},checkuserName:function(e){var s=this,a=s.$userName.val();/^[a-zA-Z][a-zA-Z0-9_]{2,19}$/.test(a)?$.ajax({url:"/checkTel",type:"GET",dataType:"json",data:{userName:a},success:function(e){e.result?(userNamTrue=!0,s.$userNam.parents(".form-group").addClass("has-success"),s.$userNam.next(".help-block").html(MSG.true)):(s.$userNam.parents(".form-group").addClass("has-error"),s.$userNam.next(".help-block").html(MSG.false+e.msg))}}):(userNamTrue=!1,s.$userName.parents(".form-group").addClass("has-error"),s.$userName.next(".help-block").html(MSG.false+MSG[102]))},checkTel:function(e){var s=this,a=s.$Tel.val();/^(((13[0-9]{1})|(15[0-9]{1})|(17[678]{1})|(18[0-9]{1}))+\d{8})$/.test(a)&&11==a.length?$.ajax({url:"/checkTel",type:"GET",dataType:"json",data:{tel:a},success:function(e){e.result?(TelTrue=!0,s.$Tel.parents(".form-group").addClass("has-success"),s.$Tel.next(".help-block").html(MSG.true)):(s.$Tel.parents(".form-group").addClass("has-error"),s.$Tel.next(".help-block").html(MSG.false+e.msg))}}):(TelTrue=!1,s.$Tel.parents(".form-group").addClass("has-error"),s.$Tel.next(".help-block").html(MSG.false+MSG[202]))},checkEmail:function(e){var s=this,a=s.$Email.val();/^[a-z]([a-z0-9]*[-_]?[a-z0-9]+)*@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$/i.test(a)||(s.$Email.parents(".form-group").addClass("has-error"),s.$Email.next(".help-block").html(MSG.false+MSG[302]))},reloadvalidata:function(){this.$codeimg.attr("src","http://www.ixm.gov.cn/dis/passport/authCode/show?"+Math.random()),validataCodeTrue=!1},removeClass:function(e){e.parents(".form-group").removeClass("has-success has-warring has-error")},listen:function(){var e=this;e.$userName.on("blur",function(){e.checkuserName()}),e.$userName.on("focus",function(){e.removeClass($(this)),$(this).next(".help-block").html(MSG[101])}),e.$Tel.on("blur",function(){e.checkTel()}),e.$Tel.on("focus",function(){e.removeClass($(this)),$(this).next(".help-block").html(MSG[201])}),e.$codeimg.on("click",function(){e.reloadvalidata($(this))}),e.$Email.on("blur",function(){e.checkEmail()}),e.$Email.on("focus",function(){e.removeClass($(this)),$(this).next(".help-block").html(MSG[301])}),e.$SubmitBtn.on("click",function(){e.checkTel()})}},window.checkFunc=new e});
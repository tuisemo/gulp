define(["jquery","MSG","lodash","layer"],function(){var e=function(){this.$Tel=$("input[type='tel']"),this.$Email=$("input[type='email']"),this.$Password=$("input[type='password']"),this.$SubmitBtn=$("#submit"),UserTrue=!1,TelTrue=!1,EmailTrue=!1,PwdTrue=!1,this.init()};e.prototype={init:function(){this.listen()},checkTel:function(e){var t=this,l=t.$Tel.val();/^(((13[0-9]{1})|(15[0-9]{1})|(17[01678]{1})|(18[0-9]{1}))+\d{8})$/.test(l)&&11==l.length?$.ajax({url:"/checkTel",type:"GET",dataType:"json",data:{tel:l},success:function(e){e.result?(TelTrue=!0,t.$Tel.parents(".form-group").addClass("has-success"),t.$Tel.next(".help-block").html(MSG.true)):(t.$Tel.parents(".form-group").addClass("has-error"),t.$Tel.next(".help-block").html(MSG.false+e.msg))}}):(TelTrue=!1,t.$Tel.parents(".form-group").addClass("has-error"),t.$Tel.next(".help-block").html(MSG.false+MSG[202]))},checkEmail:function(e){var t=this,l=t.$Email.val();/^[a-z]([a-z0-9]*[-_]?[a-z0-9]+)*@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$/i.test(l)||(t.$Email.parents(".form-group").addClass("has-error"),t.$Email.next(".help-block").html(MSG.false+MSG[302]))},removeClass:function(e){e.parents(".form-group").removeClass("has-success has-warring has-error")},listen:function(){var e=this;e.$Tel.on("blur",function(){e.checkTel()}),e.$Tel.on("focus",function(){e.removeClass($(this)),$(this).next(".help-block").html(MSG[201])}),e.$Email.on("blur",function(){e.checkEmail()}),e.$Email.on("focus",function(){e.removeClass($(this)),$(this).next(".help-block").html(MSG[301])}),e.$SubmitBtn.on("click",function(){e.checkTel()})}},window.checkFunc=new e});
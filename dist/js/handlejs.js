define(["jquery","MSG"],function(){var e={Opt:!1},t={telTrue:!1,emaliTrue:!1,validateTrue:!1},a=function(){this.$userName=$("#userName"),this.$Tel=$("input[type='tel']"),this.$Email=$("input[type='email']"),this.$validateCode=$("#validateCode"),this.$codeimg=$("#codeimg"),this.$reloadBtn=$("#reloadBtn"),this.$Password=$(".password"),this.$SubmitBtn=$("#submit"),userNamTrue=!1,telTrue=!1,emailTrue=!1,validateTrue=!1,pwdTrue=!1,this.init()};a.prototype={init:function(){this.listen()},optMsg:function(e,t,a){t===!0?(e.parents(".form-group").addClass("has-success"),e.next(".help-block").html(MSG.true)):(e.parents(".form-group").addClass("has-error"),e.next(".help-block").html(MSG.false+MSG[a]))},optresult:function(){console.log("opt"),console.log(t.telTrue+"++++"+t.userTrue),e.Opt=t.telTrue&&t.userTrue},checkuserName:function(){var e=this,a=e.$userName.val();/^[a-zA-Z][a-zA-Z0-9_]{2,19}$/.test(a)?$.ajax({url:"/checkTel",type:"GET",dataType:"json",data:{attributeName:"userName",attributeValue:a},success:function(t){t.result?(userNamTrue=!0,e.optMsg(e.$userNam,!0)):e.optMsg(e.$userNam,!1,202)}}):(userNamTrue=!1,t.userTrue=!0,e.optresult(),e.optMsg(e.$userName,!1,"102"))},checkTel:function(){var e=this,a=e.$Tel.val();/^(((13[0-9]{1})|(15[0-9]{1})|(17[678]{1})|(18[0-9]{1}))+\d{8})$/.test(a)&&11==a.length?$.ajax({url:"/checkTel",type:"GET",dataType:"json",data:{attributeName:"mobile",attributeValue:a},success:function(t){t.result?(telTrue=!0,e.optMsg(e.$Tel,!0)):(telTrue=!1,e.optMsg(e.$Tel,!1,203))}}):(telTrue=!1,t.telTrue=!0,e.optresult(),e.optMsg(e.$Tel,!1,202))},checkEmail:function(){var e=this,t=e.$Email.val();/^[a-z]([a-z0-9]*[-_]?[a-z0-9]+)*@([a-z0-9]*[-_]?[a-z0-9]+)+[\.][a-z]{2,3}([\.][a-z]{2})?$/i.test(t)?$.ajax({url:"/checkTel",type:"GET",dataType:"json",data:{attributeName:"email",attributeValue:t},success:function(t){t.result?(emailTrue=!0,e.optMsg(e.$Email,!0)):(emailTrue=!1,e.optMsg(e.$Email,!1,302))}}):(emailTrue=!1,e.optMsg(e.$Email,!1,302))},checkvalidateCode:function(){var e=this;$.ajax({url:"/checkTel",type:"GET",dataType:"json",data:{Code:e.$validateCode.val()},success:function(t){t.result?(validateTrue=!0,e.optMsg(e.$validateCode,!0)):(validateTrue=!1,e.optMsg(e.$validateCode,!1,302))}})},reloadvalidate:function(){var e=this;e.$validateCode.val(""),e.$codeimg.attr("src","http://www.ixm.gov.cn/dis/passport/authCode/show?"+Math.random()),validateTrue=!1},checkpassword:function(e){var t=this,a=t.$Password.val();/[A-Za-z].*[0-9]|[0-9].*[A-Za-z]/.test(a)?a.length<8||a.length>30?(pwdTrue=!1,t.optMsg(t.$Password,!1,502)):$.ajax({url:"/checkTel",type:"GET",dataType:"json",data:{userName:t.$userName.val()||"",password:a},success:function(e){e.result?(pwdTrue=!0,t.optMsg(t.$Password,!0)):(pwdTrue=!1,t.optMsg(t.$Password,!1,302))}}):(pwdTrue=!1,t.optMsg(t.$Password,!1,502))},confirmpwd:function(){alert("ok")},removeClass:function(e){e.parents(".form-group").removeClass("has-success has-warring has-error")},listen:function(){var t=this;t.$userName.on("blur",function(){t.checkuserName()}),t.$userName.on("focus",function(){t.removeClass($(this)),$(this).next(".help-block").html(MSG[101])}),t.$Tel.on("blur",function(){t.checkTel()}),t.$Tel.on("focus",function(){t.removeClass($(this)),$(this).next(".help-block").html(MSG[201])}),t.$validateCode.on("blur",function(){t.checkvalidateCode($(this))}),t.$validateCode.on("focus",function(){t.removeClass($(this)),$(this).next(".help-block").html(MSG[401])}),t.$codeimg.on("click",function(){t.reloadvalidate($(this))}),t.$reloadBtn.on("click",function(){t.reloadvalidate($(this))}),t.$Email.on("blur",function(){t.checkEmail()}),t.$Email.on("focus",function(){t.removeClass($(this)),$(this).next(".help-block").html(MSG[301])}),t.$Password.on("blur",function(){t.checkpassword()}),t.$Password.on("focus",function(){t.removeClass($(this)),$(this).next(".help-block").html(MSG[501])}),t.$SubmitBtn.on("click",function(){}),Object.defineProperty(e,"Opt",{set:function(e){console.log("oooooopus"+e),e&&console.log("你要赋值给我,我的新值是"+e)}})}},window.checkFunc=new a});
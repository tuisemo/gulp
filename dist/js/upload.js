define(["WebUploader"],function(e){var i=$("#fileList"),n=window.devicePixelRatio||1,a=100*n,s=100*n,d=e.create({auto:!0,swf:"../css/Uploader.swf",server:"../upload",pick:"#filePicker",accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/jpg,image/jpeg,image/png"},resize:!1});d.on("fileQueued",function(e){var n=$('<div id="'+e.id+'" class="file-item thumbnail"><img><div class="info">'+e.name+"</div></div>"),o=n.find("img");i.append(n),d.makeThumb(e,function(e,i){if(e)return void o.replaceWith("<span>不能预览</span>");o.attr("src",i)},a,s)}),d.on("uploadProgress",function(e,i){var n=$("#"+e.id),a=n.find(".progress span");a.length||(a=$('<p class="progress"><span></span></p>').appendTo(n).find("span")),a.css("width",100*i+"%")}),d.on("uploadSuccess",function(e){$("#"+e.id).addClass("upload-state-done")}),d.on("uploadError",function(e){var i=$("#"+e.id),n=i.find("div.error");n.length||(n=$('<div class="error"></div>').appendTo(i)),n.text("上传失败")}),d.on("uploadComplete",function(e){$("#"+e.id).find(".progress").remove()})});